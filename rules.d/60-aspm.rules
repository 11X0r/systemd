# do not edit this file, it will be overwritten on update

ACTION=="remove", GOTO="aspm_end"

# Intel Tiger Lake and Alder Lake VMD
SUBSYSTEMS=="pci", DRIVERS=="vmd", ATTRS{vendor}=="0x8086", ATTRS{device}=="0x9a0b", SUBSYSTEM=="pci", DRIVER=="nvme", GOTO="aspm_enable"

GOTO="aspm_end"

LABEL="aspm_enable"

TEST=="link/clkpm", ATTR{link/clkpm}="1"
TEST=="link/l0s_aspm", ATTR{link/l0s_aspm}="1"
TEST=="link/l1_aspm", ATTR{link/l1_aspm}="1"
TEST=="link/l1_1_aspm", ATTR{link/l1_1_aspm}="1"
TEST=="link/l1_1_pcipm", ATTR{link/l1_1_pcipm}="1"
TEST=="link/l1_2_aspm", ATTR{link/l1_2_aspm}="1"
TEST=="link/l1_2_pcipm", ATTR{link/l1_2_pcipm}="1"
TEST=="link/ltr_max_snoop_lat", ATTR{link/ltr_max_snoop_lat}="1003"
TEST=="link/ltr_max_nosnoop_lat", ATTR{link/ltr_max_nosnoop_lat}="1003"

LABEL="aspm_end"
